     <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste des Builds</title>
    <link rel="stylesheet" href="../styles/style.css">
    <style>
        h1 {
            text-align: center;
        }
        .header-image {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.7.1/firebase-app.js";
import { getDatabase, ref, onValue, remove } from "https://www.gstatic.com/firebasejs/11.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAnVOPY9sF5Hdo0Pr_wnLHHzGodMu8m5Kk",
  authDomain: "cor33fr-6d60b.firebaseapp.com",
  projectId: "cor33fr-6d60b",
  storageBucket: "cor33fr-6d60b.appspot.com",
  messagingSenderId: "155454546374",
  appId: "1:155454546374:web:9ad2b70565a890b04712c7",
  measurementId: "G-6Q5NJ8533G",
  databaseURL: "https://cor33fr-6d60b-default-rtdb.europe-west1.firebasedatabase.app/"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const maelleBuildTable = document.querySelector('#maelle-builds tbody');
const gustaveBuildTable = document.querySelector('#gustave-builds tbody');
const luneBuildTable = document.querySelector('#lune-builds tbody');
const scielBuildTable = document.querySelector('#sciel-builds tbody');
const monocoBuildTable = document.querySelector('#monoco-builds tbody');

function renderBuilds(builds) {
    // RÃ©initialiser les tableaux
    maelleBuildTable.innerHTML = '';
    gustaveBuildTable.innerHTML = '';
    luneBuildTable.innerHTML = '';
    scielBuildTable.innerHTML = '';
    monocoBuildTable.innerHTML = '';

    // Fonction utilitaire pour chaque catÃ©gorie
    function addRows(category, table) {
        const filtered = builds.filter(build => build.category === category);
        if (filtered.length === 0) {
            const row = document.createElement('tr');
            row.innerHTML = `<td colspan="5" style="text-align:center;color:#888;">Aucun build</td>`;
            table.appendChild(row);
        } else {
            filtered.forEach(build => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${build.name || ''}</td>
                    <td>${build.description || ''}</td>
                    <td>${build.skills ? build.skills.join(', ') : ''}</td>
                    <td>${build.weapons || ''}</td>
                    <td>
                        <button class="delete-build" data-key="${build.key}">ðŸ—‘</button>
                    </td>
                `;
                table.appendChild(row);
            });
        }
    }

    addRows('Maelle', maelleBuildTable);
    addRows('Gustave/Verso', gustaveBuildTable);
    addRows('Lune', luneBuildTable);
    addRows('Sciel', scielBuildTable);
    addRows('Monoco', monocoBuildTable);

    // Suppression
    document.querySelectorAll('.delete-build').forEach(button => {
        button.addEventListener('click', function () {
            const password = prompt('Entrez le mot de passe administrateur pour supprimer ce build :');
            if (password === 'zatsu') {
                const key = this.getAttribute('data-key');
                remove(ref(db, 'builds/' + key));
            } else {
                alert('Mot de passe incorrect. Suppression annulÃ©e.');
            }
        });
    });
}

// Ã‰coute les changements en temps rÃ©el
onValue(ref(db, 'builds'), snapshot => {
    const builds = [];
    snapshot.forEach(child => builds.push({ key: child.key, ...child.val() }));
    renderBuilds(builds);
});
    </script>
    <header>
        <img src="../images/title.png" alt="Clair Obscur Ressources FR" class="header-image">
         <nav>
            <ul>
                <li><a href="../index.html">Accueil</a></li> <!-- Lien vers la racine -->
                <li><a href="armes.html">Armes</a></li>
                <li><a href="competences-de-monoco.html">CompÃ©tences de Monoco</a></li>
                <li><a href="disques.html">Disques</a></li>
                <li><a href="pictos.html">Pictos</a></li>
                <li><a href="tenues.html">Tenues</a></li>
                <li><a href="buildlist.html" class="active>Liste des Builds</a></li>
                <!-- Dropdown menu Guides -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Guides <span class="arrow">&#9662;</span></a>
                    <ul class="dropdown-menu">
                        <li><a href="journauxexp.html">Journaux d'expÃ©ditions</a></li>
                        <li><a href="questitem.html">Objet de quÃªte</a></li>
                        <li><a href="lostgestral.html">Gestrals Perdu</a></li>
                    </ul>
                </li>
                <!-- Dropdown menu Build -->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">CrÃ©er un Build<span class="arrow">&#9662;</span></a>
                    <ul class="dropdown-menu">
                        <li><a href="gustavebuild.html">Gustave/Verso</a></li>
                        <li><a href="maellebuild.html">Maelle</a></li>
                        <li><a href="lunebuild.html">Lune</a></li>
                        <li><a href="scielbuild.html">Sciel</a></li>
                        <li><a href="monocobuild.html">Monoco</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <h1>Liste des Builds</h1>
    </header>
    <main>
        <!-- Section pour la catÃ©gorie Maelle -->
        <section id="build-list-maelle">
            <h2>Builds enregistrÃ©s</h2>
            <h3>Maelle</h3>
            <table id="maelle-builds" border="1">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Description</th>
                        <th>Pictos</th>
                        <th>Armes</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Les builds de la catÃ©gorie Maelle seront affichÃ©s ici -->
                </tbody>
            </table>
        </section>

        <!-- Section pour la catÃ©gorie Gustave/Verso -->
        <section id="build-list-gustave">
            <h3>Gustave/Verso</h3>
            <table id="gustave-builds" border="1">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Description</th>
                        <th>Pictos</th>
                        <th>Armes</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Les builds de la catÃ©gorie Gustave/Verso seront affichÃ©s ici -->
                </tbody>
            </table>
        </section>

        <!-- Section pour la catÃ©gorie Lune -->
        <section id="build-list-lune">
            <h3>Lune</h3>
            <table id="lune-builds" border="1">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Description</th>
                        <th>Pictos</th>
                        <th>Armes</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Les builds de la catÃ©gorie Lune seront affichÃ©s ici -->
                </tbody>
            </table>
        </section>

        <!-- Section pour la catÃ©gorie Sciel -->
        <section id="build-list-sciel">
            <h3>Sciel</h3>
            <table id="sciel-builds" border="1">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Description</th>
                        <th>Pictos</th>
                        <th>Armes</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Les builds de la catÃ©gorie Sciel seront affichÃ©s ici -->
                </tbody>
            </table>
        </section>

        <!-- Section pour la catÃ©gorie Monoco -->
        <section id="build-list-monoco">
            <h3>Monoco</h3>
            <table id="monoco-builds" border="1">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Description</th>
                        <th>Pictos</th>
                        <th>Armes</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Les builds de la catÃ©gorie Monoco seront affichÃ©s ici -->
                </tbody>
            </table>
        </section>
    </main>
</body>
</html>
